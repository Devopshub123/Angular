<div fxLayout="column" fxFill>
    <mat-card >
      <!-- <form [formGroup]="itDeclarationForm" autocomplete="off"> -->
      <mat-card-header class="">
        <mat-card-title> IT Declaration</mat-card-title>
      </mat-card-header>
      <div fxLayout="column"  class="tableP custom-salary-div" style="width:auto;" >
        <div class="mat-elevation-z1 ">
          <!--<table mat-table  [dataSource]="datasource" matSort>
            <ng-container matColumnDef="sno">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> S.No</th>
              <td mat-cell *matCellDef="let row ;let i=index"> {{(i+1)}}</td>
            </ng-container>
            <ng-container matColumnDef="particulars">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>particulars</th>
              <td mat-cell *matCellDef="let row"> {{row.incometaxsection}} {{row.investmentdescription}}</td>
            </ng-container>
            <ng-container matColumnDef="mlimit">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>max limit</th>
              <td mat-cell *matCellDef="let row"> {{row.investmentmaxvalue}}</td>
            </ng-container>
            <ng-container matColumnDef="percentage">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>percentage</th>
              <td mat-cell *matCellDef="let row ,let i =index">
                &lt;!&ndash; {{row.payrollAmount[0].disableper}} &ndash;&gt;
                <mat-form-field fxFlex.xs="100" fxFlex.size="2" appearance="outline" >
                  <input  value="" matInput placeholder="" >
                </mat-form-field>
              </td>
            </ng-container>
  
  
            <ng-container matColumnDef="declareamount">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> declareamount </th>
              <td mat-cell *matCellDef="let row ,let i =index">
                &lt;!&ndash; {{row.payrollAmount[0].declareamount}} &ndash;&gt;
                <mat-form-field fxFlex.xs="100" fxFlex.size="2" appearance="outline" >
                  <input   value="" matInput placeholder="" >
                </mat-form-field>
              </td>
            </ng-container>
            <ng-container matColumnDef="samount">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> samount </th>
              <td mat-cell *matCellDef="let row ,let i =index">
                &lt;!&ndash; {{row.payrollAmount[0].submittedamount}} &ndash;&gt;
                <mat-form-field fxFlex.xs="100" fxFlex.size="2" appearance="outline" >
                  <input  value="" matInput placeholder="" >
                </mat-form-field>
              </td>
            </ng-container>
            <ng-container matColumnDef="receiptnumber">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> receiptnumber </th>
              <td mat-cell *matCellDef="let row ,let i =index">
                &lt;!&ndash; {{row.payrollAmount[0].receiptnumber}} &ndash;&gt;
                <mat-form-field fxFlex.xs="100" fxFlex.size="2" appearance="outline" >
                  <input  value="" matInput placeholder="" >
                </mat-form-field>
              </td>
            </ng-container>
            <ng-container matColumnDef="attachments">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> attachments </th>
              <td mat-cell *matCellDef="let row,let i =index">
                &lt;!&ndash; {{row.payrollAmount[0].receiptnumber}} &ndash;&gt;
                <mat-form-field fxFlex.xs="100" fxFlex.size="2" appearance="outline" >
                  <input  value="" matInput placeholder="" >
                </mat-form-field>
              </td>
            </ng-container>
            <ng-container matColumnDef="approveamount">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> approveamount </th>
              <td mat-cell *matCellDef="let row,let i =index">
                &lt;!&ndash; {{row.payrollAmount[0].approvedamount}} &ndash;&gt;
                <mat-form-field fxFlex.xs="100" fxFlex.size="2" appearance="outline" >
                  <input  value="" matInput placeholder="" >
                </mat-form-field>
              </td>
            </ng-container>
  
            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef>  </th>
              <td mat-cell *matCellDef="let row">
  
                <mat-icon  class="mr-2" title="cancel" (click)="setEmployeeInvestments()" style="color: green;">
                  check_box</mat-icon>
                <mat-icon  class="mr-2" title="cancel"  style="color: red;">
                  cancel</mat-icon>
                &lt;!&ndash; <mat-icon class="mr-2" title="Delete"
                    (click)="updating(row)">delete</mat-icon> &ndash;&gt;
                &lt;!&ndash; <mat-icon class="mr-2" title="Update" style="color: red;"
               >delete</mat-icon> &ndash;&gt;
                <mat-icon  class="mr-2" title="Add" style="color: green;">
                  add_circle</mat-icon>
              </td>
            </ng-container>
  
            <tr class="headerbox title" mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="8" style="text-align: center;">No data found</td>
            </tr>
          </table>-->
          <table class="table table-bordered tab-lap-desk-show">
            <thead style="background-color: #28acaf;">
            <tr>
              <th scope="col" style="font-weight: 400;color: white">S.No.</th>
              <th scope="col" style="font-weight: 400;width:10%;color: white">Particulars</th>
              <th scope="col" style="font-weight: 400;width:8%;color: white">Maximum Limit</th>
              <th scope="col" style="font-weight: 400;width:10%;color: white">Percentage</th>
              <th scope="col" style="font-weight: 400;width:8%;color: white">Declared Amount</th>
              <th scope="col" style="font-weight: 400;width:10%;color: white">Submitted Amount</th>
              <th scope="col" style="font-weight: 400;width:10%;color: white">Receipt Number</th>
              <th scope="col" style="font-weight: 400;width:12%;color: white">Attachment</th>
              <th scope="col" style="font-weight: 400;width:8%;color: white">Approved Amount</th>
              <th scope="col" style="font-weight: 400;width:12%;color: white">Status</th>
              <th scope="col" style="font-weight: 400;width:12%;color: white"></th>
             
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of datasource;let i = index">
              <th scope="row" style="font-weight: 400;">{{i+1}}</th>
              <!-- <td>{{item.investment_section}} {{item.investment_description}}</td> -->
              <!-- <td>{{item.description}}</td> --><td>{{item.description_section}} 
                <i class="	fa fa-exclamation-circle" title="{{item.description}}" style="font-size:15px;"></i>  

                <!-- <mat-icon title="{{item.description}}" class="iconstyle" style="font-size: 15px;">info</mat-icon> -->
              </td>
              <td>{{item.investment_maxvalue}}</td>
              <td >
                <input type="number" readonly="true"  value="" placeholder="" style="width:100%;background-color: #e8e8e8;" *ngIf="!item.disability_flag">
                <input type="number"   name="percentage" #percentage="ngModel" [(ngModel)]="InvestmentDetails.percentage[i]"  value="" placeholder="" style="width:100%;" *ngIf="item.disability_flag">
                <input type="file"  value="" placeholder="" style="width:110%;margin-right:5px;"  (change)="onClick($event,item)" *ngIf="item.disability_flag && item.disability_file==null"/>
                <span class="link" (click)="disableFileView(item)" style="width:80%;margin-right:5px;"   *ngIf="item.disability_flag && item.disability_file!=null">{{item.disability_file}}</span> 
                <i class="fa fa-trash " title="Delete file" aria-hidden="true" style="width:10%;margin-right:5px;color:#f10219;"  *ngIf="item.disability_flag && item.disability_file!=null " (click)="deletedisablefile(item)"></i>
                <!-- <span class="link"  >{{sampleAttachment[i][atindex]}}</span> -->
                <!-- <i class="fa fa-trash " title="Delete" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#f10219;" ></i> -->
                <!-- <button mat-button color="success" (click)="onClick()">
                  <i class="fa fa-upload" aria-hidden="true" type="file" *ngIf="item.disability_flag"></i>
                </button> -->
            </td>
  
              <td >
                <!-- <span *ngIf="item.declared_amount===null"> -->
                  <!-- <input type="text" formControlName="damount" value="" placeholder="" style="width:100%;" *ngIf="item.declare_amount == null" > -->
                  <input type="number" onKeyPress="if(this.value.length==15) return false;"  name="damount" #damount="ngModel" [(ngModel)]="InvestmentDetails.damount[i]"  value="" placeholder="" style="width:100%;"  >

<!--                 
                </span>
                <span *ngIf="item.declared_amount!=null">{{item.declared_amount}}</span> -->
  
              </td>
              <td>
                <div *ngFor="let submitted_amount of sampleSAAmount[i];let groupIndex=index;trackBy:trackByFn" >
                <!-- <div *ngFor="let submitted_amount of item.submitted_amount[i];let groupIndex=index;"> -->
                        <div style="margin-bottom:4px;">
                        <!-- <input type="text"  value="{{submitted_amount}}" placeholder="" style="width:100%;" (change)="Onchange($event,item)">  -->
                          <input type="number"  onKeyPress="if(this.value.length==13) return false;"  name="submittedamount" #submittedamount="ngModel" [(ngModel)]="InvestmentDetails.submittedamount[i][groupIndex]"    placeholder="" style="width:100%;">
                        </div>
                </div>
              </td>
              <td>
                <div>
                  <div  *ngFor="let rn of sampleRN[i]; let rindex=index;trackBy:trackByFn">
                      <div style="margin-bottom:4px;">
                        <!-- <input type="text"  value="{{rn}}" placeholder="" style="width:100%;"> -->
                        <input type="text" name="receiptnumner" #receiptnumner="ngModel" [(ngModel)]="InvestmentDetails.receiptnumner[i][rindex]"    placeholder="" style="width:100%;">

                      </div>
                    </div>
                  </div>
                </td>
              <td>
                <div  *ngFor="let at of sampleAttachment[i]; let atindex=index">
                    <div style="margin-bottom:4px;">
                     <!-- <button type="file"  value="{{at}}" placeholder=""    *ngIf="sampleAttachment[i][atindex] ==''"> <mat-icon   title="Delete" (change)="onSelectFile($event,item,atindex)" >delete</mat-icon></button> -->
                    <!-- <button mat-icon-button *ngIf="sampleAttachment[i][atindex] ==''"  style="width:10px;margin-right:5px;">
                      <input type="file"  value="{{at}}"   (change)="onSelectFile($event,item,atindex)" accept="pdf/*" />  
                     </button> -->
                    <!-- -->
                  <input type="file"  value="{{at}}" placeholder="" style="width:100%;margin-right:5px;"  (change)="onSelectFile($event,item,atindex)" *ngIf="sampleAttachment[i][atindex] ==''"/>
                  <span class="link" (click)="fileView(item,atindex)" *ngIf="sampleAttachment[i][atindex] !=''" style="width:100%;margin-right:5px;">{{sampleAttachment[i][atindex]}}</span>&nbsp;
                  <i class="fa fa-trash " title="Delete" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#f10219;" *ngIf="sampleAttachment[i][atindex] !='' && sampleApprovedAmount[i][atindex] ==''" (click)="deletefile(item,atindex,i)"></i>

      
                  
                </div>
                </div>
              </td>
              
                <td>
                  <div  *ngFor="let am of sampleApprovedAmount[i];let aaindex=index;trackBy:trackByFn;">
                    <input type="number" onKeyPress="if(this.value.length==13) return false;"    readonly="true" name="approveamount" #approveamount="ngModel" [(ngModel)]="InvestmentDetails.approveamount[i][aaindex]"    placeholder="" style="width:100%;margin-right:5px;background-color: #e8e8e8;">

                    
                  <!-- {{sampleStatus[i][st]}} <mat-icon title="{{item.description}}" class="iconstyle">info</mat-icon></td> -->
                  <!-- <mat-icon title="{{sampleStatusReason[i][st]}}" class="iconstyle" *ngIf="sampleStatus[i][aaindex] == 10">info</mat-icon> -->
                </div>
                <!-- <div  *ngFor="let am of sampleStatusReason[i]; let str=index;" *ngIf="{{sampleStatus[i][str]}} == 10">
                  <mat-icon title="{{item.sampleStatusReason[i][str]}}" class="iconstyle">info</mat-icon>
                </div> -->
                </td>

              
              <td>
                <div>
                  <div  *ngFor="let status of sampleStatus[i]; let strr of sampleStatusReason[i];let aaindex=index;" >
                      <div style="margin-bottom:4px;">
                <!-- <input type="text" readonly="true" value="{{am}}" placeholder="" style="width:61%;margin-right:5px;"> -->
                <!-- <input type="number" onKeyPress="if(this.value.length==13) return false;"    readonly="true" name="approveamount" #approveamount="ngModel" [(ngModel)]="InvestmentDetails.approveamount[i][aaindex]"    placeholder="" style="width:50%;margin-right:5px;background-color: #e8e8e8;"> -->
                <span >{{sampleStatus[i][aaindex]}}</span>
                <!-- <input type="number" value="{{sampleStatus[i][aaindex]}}"    readonly="true" name="approveamount"   placeholder="" style="width:80%;margin-right:5px;background-color: #e8e8e8;"> -->
                <i class="	fa fa-exclamation-circle" title="{{sampleStatusReason[i][aaindex]}}" style="font-size:15px;" *ngIf="sampleStatusReason[i][aaindex] == 'Rejected'"></i>
                
                <!-- <i class="fa fa-check-circle" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#0bb939;" (click)="setdata(item,aaindex)" title="Submit" *ngIf="sampleApprovedAmount[i][aaindex] ==''"></i>
                <i class="fa fa-trash" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#f10219;" (click)="deleteInvestments(item,aaindex,i)" title="Delete" *ngIf="sampleApprovedAmount[i][aaindex] ==''"></i>
                <i class="fa fa-plus-circle" aria-hidden="true" style="font-size:15px;color:#2ea24a;" title="Add" (click)="addSubItdeclaration(i)" ></i>
               
               <i class="	fa fa-exclamation-circle" title="{{sampleStatusReason[i][aaindex]}}" style="font-size:15px;" *ngIf="sampleStatus[i][aaindex] == 10"></i>   -->

              </div>
              </div>
              </div>
              </td>
              <td>
                <div>
                  <div  *ngFor="let am of sampleApprovedAmount[i];let aaindex=index;" >
                      <div style="margin-bottom:4px;">
                <!-- <input type="text" readonly="true" value="{{am}}" placeholder="" style="width:61%;margin-right:5px;"> -->
                <!-- <input type="number" onKeyPress="if(this.value.length==13) return false;"    readonly="true" name="approveamount" #approveamount="ngModel" [(ngModel)]="InvestmentDetails.approveamount[i][aaindex]"    placeholder="" style="width:50%;margin-right:5px;background-color: #e8e8e8;"> -->
                <!-- {{sampleStatus[i][aaindex]}} -->
                <i class="fa fa-check-circle" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#0bb939;" (click)="setdata(item,aaindex)" title="Submit" *ngIf="sampleApprovedAmount[i][aaindex] =='' "></i>
                <i class="fa fa-trash" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#f10219;" (click)="deleteInvestments(item,aaindex,i)" title="Delete" *ngIf="sampleApprovedAmount[i][aaindex] ==''"></i>
                <i class="fa fa-plus-circle" aria-hidden="true" style="font-size:15px;color:#2ea24a;" title="Add" (click)="addSubItdeclaration(i)" *ngIf="sampleStatus[i][aaindex] != ''" ></i>
               
               <!-- <i class="	fa fa-exclamation-circle" title="{{sampleStatusReason[i][aaindex]}}" style="font-size:15px;" *ngIf="sampleStatusReason[i][aaindex] != null"></i>   -->

              </div>
              </div>
              </div>
              </td>
  
            </tr>
            <br>
            <br>
  
  
            </tbody>
          </table>
          <div class="mob-port-show" style="margin-left:9px;margin-right:9px;">
  
            <div class="card card-stats" *ngFor="let item of datasource;let i = index">
              <div class="card-body ">
                <div class="row">
                  <mat-accordion style="width:100%;">
                    <mat-expansion-panel>
                      <mat-expansion-panel-header style="height:auto;">
                        <mat-panel-title style="display: block !important;">
                          <div>S.No</div>
                          <div style="color: rgba(0,0,0,.54) !important;">{{i+1}}</div>
                        </mat-panel-title>
                        <mat-panel-description style="display: block !important;">
                          <div style="color: rgba(0,0,0,.87) !important;">Particulars</div>
                          <div>{{item.description}}</div>
                          
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      <div style="margin-top: 40px;">
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;">
                            Maximum Limit
                          </div>
                          <div>
                            {{item.investment_maxvalue}}
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;">
                            Percentage
                          </div>
                          <div>
                            <input type="text" readonly="!item.disability_percentage"  name="percentage" #percentage="ngModel" [(ngModel)]="InvestmentDetails.percentage"  value="" placeholder="" style="width:100%;background-color: #e8e8e8;">
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;">
                            Declared Amount
                          </div>
                          <div>
                            <input type="number"   name="damount" #damount="ngModel" [(ngModel)]="InvestmentDetails.damount[i]"  value="" placeholder="" style="width:100%;"  >
                          </div>
                        </div>
                       
                        <div style="display:flex;margin-bottom: 1rem;" *ngFor="let submitted_amount of sampleSAAmount[i];let groupIndex=index;">
                          <div style="width:50%;">
                            Submitted Amount
                          </div>
                          <div>
                            <input type="number" name="submittedamount" #submittedamount="ngModel" [(ngModel)]="InvestmentDetails.submittedamount[i][groupIndex]"    placeholder="" style="width:100%;">
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;" *ngFor="let rn of sampleRN[i]; let rindex=index">
                          <div style="width:50%;">
                            Receipt Number
                          </div>
                          <div>
                            <input type="text" name="receiptnumner" #receiptnumner="ngModel" [(ngModel)]="InvestmentDetails.receiptnumner[i][rindex]"    placeholder="" style="width:100%;">
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;" *ngFor="let at of sampleAttachment[i]; let atindex=index">
                          <div style="width:50%;margin-left: 0;">
                            Attachments
                          </div>
                          <div>
                            <input type="file"  value="{{at}}" placeholder="" style="width:80%;margin-right:5px;"  (change)="onSelectFile($event,item,atindex)" *ngIf="sampleAttachment[i][atindex] ==''"/>
                            <span class="link" (click)="fileView(item,atindex)"  *ngIf="sampleAttachment[i][atindex] !=''">{{sampleAttachment[i][atindex]}}</span>
                            <i class="fa fa-trash " title="Delete" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#f10219;" *ngIf="sampleAttachment[i][atindex] !='' && sampleApprovedAmount[i][atindex] ==''" (click)="deletefile(item,atindex,i)"></i>
                            <!-- <input type="text" value="" placeholder="" style="width:80%;margin-right:5px;"><i class="fa fa-upload" aria-hidden="true"></i> -->
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;" *ngFor="let am of sampleApprovedAmount[i]; let aaindex=index">
                          <div style="width:50%;margin-left: 0;">
                            Approved Amount
                          </div>
                          <div>
                            <input type="number" readonly="true" name="approveamount" #approveamount="ngModel" [(ngModel)]="InvestmentDetails.approveamount[i][aaindex]"    placeholder="" style="width:61%;margin-right:5px;background-color: #e8e8e8;" >
                            <i class="fa fa-check-circle" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#0bb939;" (click)="setdata(item,aaindex)" title="Submit" *ngIf="sampleApprovedAmount[i][aaindex] ==''"></i>
                            <i class="fa fa-trash" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#f10219;" (click)="deleteInvestments(item,aaindex,i)" title="Delete" *ngIf="sampleApprovedAmount[i][aaindex] ==''"></i>
                            <i class="fa fa-plus-circle" aria-hidden="true" style="font-size:15px;color:#2ea24a;" title="Add" (click)="addSubItdeclaration(i)" *ngIf="sampleApprovedAmount[i][aaindex] =='' && sampleApprovedAmount[i].length > aaindex"></i>
                            <!-- <i class="fa fa-check-circle" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#0bb939;"(click)=set($event)></i>
                            <i class="fa fa-trash" aria-hidden="true" style="font-size:15px;margin-right:5px;color:#f10219;"></i>
                            <i class="fa fa-plus-circle" aria-hidden="true" style="font-size:15px;color:#2ea24a;"></i> -->
                          </div>
                        </div>
  
  
                      </div>
                    </mat-expansion-panel>
                  </mat-accordion>
                </div>
              </div>
            </div>
            <div class="card card-stats">
              <div class="card-body ">
                <div class="row">
                  <mat-accordion style="width:100%;">
                    <mat-expansion-panel>
                      <mat-expansion-panel-header>
                        <mat-panel-title style="display: block !important;">
                          <div>S.No</div>
                          <div style="color: rgba(0,0,0,.54) !important;">02</div>
                        </mat-panel-title>
                        <mat-panel-description style="display: block !important;">
                          <div style="color: rgba(0,0,0,.87) !important;">Particulars</div>
                          <div>Sec 80DD - Handicapped Dependent</div>
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      <div style="margin-top: 40px;">
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;">
                            Maximum Limit
                          </div>
                          <div>
                            1,000
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;">
                            Declared Amount
                          </div>
                          <div>
  
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;">
                            Submitted Amount
                          </div>
                          <div>
  
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;">
                            Verified Amount
                          </div>
                          <div>
  
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;margin-left: 0;">
                            Attachments
                          </div>
                          <div>
                            attachment.png
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;margin-left: 0;">
                            Status
                          </div>
                          <div>
  
                          </div>
                        </div>
                        <div style="display:flex;margin-bottom: 1rem;">
                          <div style="width:50%;margin-left: 0;">
                            Action
                          </div>
                          <div>
                            <mat-icon>file_upload</mat-icon>
                          </div>
                        </div>
  
                      </div>
                    </mat-expansion-panel>
                  </mat-accordion>
                </div>
              </div>
            </div>
          </div>
  
  
        </div>
      </div>
    <!-- </form> -->
    </mat-card>
  </div>
  
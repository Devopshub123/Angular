<div fxLayout="column">
  <mat-card-header>
    <mat-card-title> Termination Pending Checklist </mat-card-title>
  </mat-card-header>

  <div fxLayout="column" fxLayout.xs="column" *ngIf="isAdd">
    <form [formGroup]="checklistForm" autocomplete="off">
      <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="center">
        <mat-form-field fxFlex.xs="100" fxFlex="50" class="mx-2 my-2" appearance="outline">
          <mat-label>Employee Name</mat-label>
          <input type="text" formControlName="employeeName" matInput placeholder="" maxlength="100" readonly />
        </mat-form-field>

        <mat-form-field fxFlex.xs="100" fxFlex="50" class="mx-2 my-2" appearance="outline">
          <mat-label>Termination Date</mat-label>
          <input type="text" readonly formControlName="joiningDate" matInput placeholder="" maxlength="10" />
        </mat-form-field>

        <mat-form-field fxFlex.xs="100" fxFlex="50" class="mx-2 my-2" appearance="outline">
          <mat-label>Designation</mat-label>
          <input type="text" readonly formControlName="designation" matInput placeholder="" maxlength="10" />
        </mat-form-field>
      </div>

      <div fxLayout="column">
        <div class="mat-elevation-z1 tableP">
          <mat-table #table [dataSource]="checklistDataSource" matSort>

            <ng-container matColumnDef="sno">
              <mat-header-cell *matHeaderCellDef>S.No</mat-header-cell>
              <mat-cell *matCellDef="let row ;let i=index"> {{(i+1)}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="dept">
              <mat-header-cell *matHeaderCellDef>Department</mat-header-cell>
              <mat-cell *matCellDef="let row">{{row.department_name}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="approver">
              <mat-header-cell *matHeaderCellDef>Approver Name</mat-header-cell>
              <mat-cell *matCellDef="let row">{{row.approvername}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="checklist">
              <mat-header-cell *matHeaderCellDef>checklist</mat-header-cell>
              <mat-cell *matCellDef="let row">{{row.checklist_name}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="status">
              <mat-header-cell *matHeaderCellDef> status </mat-header-cell>
              <mat-cell *matCellDef="let row">
                <mat-checkbox (click)="$event.stopPropagation()"
                    (change)="toggle($event, row)"
                    [checked]="row.status == 'Completed'">
                  </mat-checkbox>
              </mat-cell>
            </ng-container>


            <mat-header-row class="title" *matHeaderRowDef="checklistdisplayedColumns;sticky:true"></mat-header-row>
            <mat-row *matRowDef="let row;columns:checklistdisplayedColumns" (click)="selection.toggle(row)"></mat-row>
          </mat-table>
        </div>
        <section style="padding-top: 1%;padding-left: 1%;">
          <mat-checkbox class="example-margin" formControlName="isChecked" [(ngModel)]="checked">No Due</mat-checkbox>
        </section>

        <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="center">
          <mat-form-field fxFlex.xs="100" fxFlex="50" class="mx-2 my-2" appearance="outline">
            <mat-label>Add Comments</mat-label>
            <input type="text" onlyNumber formControlName="remarks" matInput placeholder="" maxlength="500" />
          </mat-form-field>
        </div>
      </div>

      <div fxLayoutAlign="center">
        <button class="m-1 mat-stroked-button button-save" (click)="saveRequest()" type="submit">
          <span>Submit</span>
        </button>
        <button class="m-1 mat-stroked-button button-clear" (click)="cancel()">
          <span>Cancel</span>
        </button>
        <br />
      </div>

    </form>
  </div>

  <form [formGroup]="hrOnboardingForm" autocomplete="off" *ngIf="isdata">

    <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="center">
      <mat-form-field fxFlex.xs="100" fxFlex="32" class="mx-2 my-2" appearance="outline">
        <mat-label>Date of Join</mat-label>
        <input matInput readonly [matDatepicker]="searchDate" [min]="minDate" [max]="maxDate" placeholder="MM/DD/YYYY" 
          formControlName="searchDate" (click)="searchDate.open()">
        <mat-datepicker-toggle class="datepicker" matSuffix [for]="searchDate"></mat-datepicker-toggle>
        <mat-datepicker #searchDate></mat-datepicker>
      </mat-form-field>

      <mat-form-field fxFlex.xs="100" fxFlex="32" class="mx-2 my-2" appearance="outline">
        <mat-label>Search employee</mat-label>
        <input formControlName="searchName" (keyup)="applyFilter($event)" matInput placeholder="" maxlength="100">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>

    </div>
    <div class="tableP">
      <div class="mat-elevation-z1">
        <table mat-table [dataSource]="dataSource" matSort>

          <!-- Checkbox Column -->
          <!-- <ng-container matColumnDef="select">
                        <th mat-header-cell *matHeaderCellDef>
                          <mat-checkbox (change)="$event ? masterToggle() : null"
                                        [checked]="selection.hasValue() && isAllSelected()"
                                        [indeterminate]="selection.hasValue() && !isAllSelected()">
                          </mat-checkbox>
                        </th>
                        <td mat-cell *matCellDef="let row">
                          <mat-checkbox (click)="$event.stopPropagation()"
                                        (change)="$event ? selection.toggle(row) : null"
                                        [checked]="selection.isSelected(row)">
                          </mat-checkbox>
                        </td>
                      </ng-container> -->

          <ng-container matColumnDef="sno">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> S.No</th>
            <td mat-cell *matCellDef="let row ;let i=index"> {{(i+1)}}</td>
          </ng-container>


          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Full Name </th>
            <td mat-cell *matCellDef="let element"> {{element.empname}} </td>
          </ng-container>

          <ng-container matColumnDef="hiredate">
            <th mat-header-cell *matHeaderCellDef> Teminate Date </th>
            <td mat-cell *matCellDef="let element"> {{element.terminationdate | date:'dd-MM-yyyy'}} </td>
          </ng-container>

          <ng-container matColumnDef="joindate">
            <th mat-header-cell *matHeaderCellDef> Joining Date </th>
            <td mat-cell *matCellDef="let element"> {{element.dateofjoin | date:'dd-MM-yyyy'}} </td>
          </ng-container>

          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let element"> {{element.final_status}} </td>
          </ng-container>
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let row">
              <button mat-icon-button matTooltip="Checklist Overview" (click)="addChecklistOverview(row)">
                <mat-icon>edit</mat-icon>
              </button>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;">
          </tr>
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="6" style="text-align: center;">No data found</td>
        </tr>
        </table>
        <mat-paginator [pageSizeOptions]="!pageLoading ? getPageSizes() : [5, 10, 20]"></mat-paginator>
      </div>
    </div>

  </form>
</div>
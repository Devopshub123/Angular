<div fxLayout="column">
     <mat-card-header fxLayoutAlign="space-between center">
            <mat-card-title>Checklist</mat-card-title>
            <span *ngIf="isAdd"  (click)="cancel()" style="padding-right: 10px;">
                <button mat-icon-button matTooltip="Back"> <mat-icon>arrow_back</mat-icon></button>
               </span>
         </mat-card-header>

        <form [formGroup]="checklistForm" autocomplete="off">
            <div fxLayout="column" fxLayout.xs="column" *ngIf="isAdd">

                <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="center">
                    <span style="padding-top: 20px;padding-left: 20px;">
                       <mat-radio-group  formControlName="onboardCategory">
                                <mat-radio-button class="mx2 my-2 mr-2" value="Onboarding" [checked]='true'>Onboarding</mat-radio-button>
                                <mat-radio-button class="mx2 my-2 mr-2" value="Offboarding">Offboarding</mat-radio-button>
                             </mat-radio-group>
                       </span>
                </div>
                <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="center">
                    <mat-form-field fxFlex.xs="100" fxFlex="32" class="mx-2 my-2" appearance="outline">
                        <mat-label>Department</mat-label>
                        <mat-select required formControlName="department">
                            <ng-container>
                                <div *ngFor="let r of departmentList">
                                    <mat-option [value]="r.id" (onSelectionChange)="departmentChange()" >{{r.deptname}}</mat-option>
                                </div>
                            </ng-container>
                        </mat-select>
                        <mat-error class="con-error" *ngIf="checklistForm.controls.department.errors?.required">
                            {{EM2}}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field fxFlex.xs="100" fxFlex="32" class="mx-2 my-2" appearance="outline">
                        <mat-label>Checklist Name</mat-label>
                        <input type="text" formControlName="description" matInput placeholder="Checklist Name" maxlength="100" required>
                         <mat-error class="con-error"
                                  *ngIf="checklistForm.controls.description.errors?.required || checklistForm.controls.description.errors?.['whitespace']">
                               {{EM1}}
                              </mat-error>
                    </mat-form-field>
                    <button mat-icon-button type="submit">
                        <mat-icon class="addBtn" title="Add" fxLayoutAlign="end" (click)=" add()">add_box
                        </mat-icon>
                    </button>

              </div>
                <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="center">
                    <mat-list *ngIf="addChecklistData.length > 0">
                        <mat-list-item class="list" *ngFor="let list of addChecklistData; let i = index">
                            <mat-icon style="color:#28acaf;">label_important</mat-icon>
                            <span style="padding-left: 5%;
                            padding-right: 20%;
                            font-size: initial;">{{list.description}}</span>
                            <a (click)="removeText(i)"><mat-icon style="color: rgb(247, 115, 115);
                                font-size: 23px;" title="Delete">delete_forever</mat-icon></a>
                        </mat-list-item>
                      </mat-list>
                   </div>

                <div fxLayoutAlign="center" *ngIf="addChecklistData.length > 0">
                    <button class="m-1 mat-stroked-button button-save" type="button" (click)="submit()">
                        <span>Submit</span>
                    </button>
                    <button class="m-1 mat-stroked-button button-clear" (click)="cancel()">
                        <span>Cancel</span>
                    </button>
                    <br />
                </div>
            </div>

<div fxLayout="column" class="tableP" *ngIf="isdata">
     <div fxLayout="row" fxLayout.xs="column" fxFlex.xs="100%" fxLayoutAlign="space-between center">
        <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="center">
            <span style="padding-top: 20px;padding-left: 20px;">
               <mat-radio-group  formControlName="onboardCategory">
                        <mat-radio-button class="mx2 my-2 mr-2" value="Onboarding" [checked]='true'>Onboarding</mat-radio-button>
                        <mat-radio-button class="mx2 my-2 mr-2" value="Offboarding">Offboarding</mat-radio-button>
                     </mat-radio-group>
               </span>
        </div>
        <span>
            <button class="mx-1 mat-stroked-button button-save" style="background-color:#3f51b5;color:aliceblue"
            (click)="AddData()" type="submit">
            <span>Add</span>
        </button>
        </span>

    </div><br>



          <div class="mat-elevation-z1">
                <table mat-table [dataSource]="dataSource" matSort>
                    <ng-container matColumnDef="sno">
                        <th mat-header-cell *matHeaderCellDef>S.No</th>
                        <td mat-cell *matCellDef="let element; let i=index;">
                            {{ (i+1) + (paginator.pageIndex * paginator.pageSize) }} </td>
                    </ng-container>

                    <ng-container matColumnDef="department">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header > Department </th>
                        <td mat-cell *matCellDef="let row" >
                            <span>{{row.department_name}} </span>

                        </td>
                    </ng-container>

                    <ng-container matColumnDef="checklistname">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header > Checklist Name </th>


                        <td mat-cell *matCellDef="let row" >
                            <span *ngIf="enable != row.id">{{row.description}} </span>
                            <span *ngIf="enable === row.id">
                                <mat-form-field appearance="outline">
                                <input formControlName="description" matInput maxlength="100" placeholder="{{row.description}}" >
                                <mat-error class="con-error" *ngIf="checklistForm.controls.description.errors?.required || checklistForm.controls.description.errors?.['whitespace']">
                                    {{EM1}}
                                </mat-error>
                            </mat-form-field>
                            </span>
                        </td>
                      </ng-container>

                    <ng-container matColumnDef="status">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="padding-left: 60px"> Status </th>
                        <td mat-cell *matCellDef="let row">
                            <mat-radio-group>
                                <mat-radio-button class="mr-2" color="primary"
                                *ngFor="let value of statusValues;index as i;"
                                (change)="statusChange(value.name,row)"
                                [checked]="value.name == row.status"  [value]="value.name">
                                {{value.name}}</mat-radio-button>
                              </mat-radio-group>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
                        <td mat-cell *matCellDef="let row">
                            <mat-icon (click)="edit($event,row)"  title="Edit" *ngIf="enable != row.id">edit</mat-icon>
                            <mat-icon (click)="updateData(checklistForm.controls.description.value,row)"  title="Save" *ngIf="enable == row.id">save</mat-icon>
                            <mat-icon (click)="canceledit($event,row.id)"  title="Cancel" *ngIf="enable == row.id">cancel</mat-icon>
                        </td>
                    </ng-container>

                   <tr class="headerbox title" mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                        <tr class="mat-row" *matNoDataRow>
                            <td class="mat-cell" colspan="5" style="text-align: center;">No data found</td>
                        </tr>
                </table>
               <mat-paginator [pageSizeOptions]="!pageLoading ? getPageSizes() : [5, 10, 20]"></mat-paginator>

            </div>

    </div>
    </form>
</div>

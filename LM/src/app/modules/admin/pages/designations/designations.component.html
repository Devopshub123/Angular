<div fxLayout="column" style="background-color: white">
  <form [formGroup]="designationForm" autocomplete="off">
    <mat-card-header>
      <mat-card-title> Designation </mat-card-title>
    </mat-card-header>
    <mat-divider></mat-divider>
    <div fxLayout="column" fxLayout.xs="column" *ngIf="isAdd">
      <div fxLayout="row" fxLayout.xs="row">
        <mat-form-field
          fxFlex.xs="100"
          fxFlex="50"
          class="mx-2 my-2"
          appearance="outline"
        >
          <mat-label>Designation</mat-label>
          <input
            formControlName="designation"
            matInput
            placeholder=""
            required
            maxlength="64"
          />
          <mat-error
            class="con-error"
            *ngIf="designationForm.controls.designation.errors?.require ||
                    designationForm.controls.designation.errors?.['whitespace']"
          >
            {{ errorDesName }}
          </mat-error>
        </mat-form-field>
      </div>
      <div fxLayoutAlign="center">
        <button
          class="mx-1 mat-stroked-button button-save"
          style="background-color: #3f51b5; color: aliceblue"
          (click)="setdesignations()"
          type="submit"
        >
          <span>Submit</span>
        </button>

        <button
          class="mx-1 mat-stroked-button button-clear"
          style="background-color: #550534; color: aliceblue"
          (click)="cancel()"
        >
          <span>Cancel</span>
        </button>
        <br />
      </div>
    </div>
    <br />
    <!-- <mat-divider></mat-divider> -->
    <div fxLayout="column" *ngIf="isdata">
      <div fxLayout="row" fxLayoutAlign="end">
        <button
          class="mx-1 mat-stroked-button button-save"
          style="background-color: #3f51b5; color: aliceblue"
          (click)="Add()"
          type="button"
        >
          <span>Add</span>
        </button>
      </div>
      <br />
      <div fxLayout="column" class="tableP">
        <div class="mat-elevation-z1">
          <table mat-table [dataSource]="dataSource" matSort>
            <ng-container matColumnDef="designation">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Designation
              </th>
              <!-- <td mat-cell *matCellDef="let row"> {{row.designation}} </td> -->
              <td mat-cell *matCellDef="let row">
                <span *ngIf="enable != row.id">{{ row.designation }} </span>
                <span *ngIf="enable === row.id">
                  <mat-form-field appearance="outline">
                    <input
                      formControlName="designation"
                      matInput
                      placeholder="{{ row.designation }}"
                      maxlength="100"
                    />
                    <mat-error
                      class="con-error"
                      *ngIf="designationForm.controls.designation.errors?.required || designationForm.controls.designation.errors?.['whitespace']"
                    >
                      {{ errorDesName }}
                    </mat-error>
                  </mat-form-field>
                </span>
              </td>
            </ng-container>

            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef style="padding-left: 60px">
                Status
              </th>
              <!-- <td mat-cell *matCellDef="let row"> {{row.status}}</td> -->
              <td mat-cell *matCellDef="let row">
                <mat-radio-group>
                  <mat-radio-group>
                    <mat-radio-button
                      class="mr-2"
                      color="primary"
                      *ngFor="let halfs of arrayValue; index as i"
                      (change)="status(halfs.id, row.id, row.designation)"
                      [checked]="halfs.id == row.status"
                      [value]="halfs.id"
                      >{{ halfs.name }}</mat-radio-button
                    >
                  </mat-radio-group>
                </mat-radio-group>
              </td>
            </ng-container>

            <ng-container matColumnDef="Action">
              <th mat-header-cell *matHeaderCellDef></th>

              <!-- <td mat-cell *matCellDef="let row"> {{row.id}} </td> -->
              <td mat-cell *matCellDef="let row">
                <mat-icon
                  (click)="edit($event, row)"
                  title="Edit"
                  *ngIf="enable != row.id"
                  >edit</mat-icon
                >
                <mat-icon
                  (click)="
                    save(
                      $event,
                      row.id,
                      designationForm.controls.designation.value,
                      row
                    )
                  "
                  title="Save"
                  *ngIf="enable == row.id"
                  >save</mat-icon
                >
                <mat-icon
                  (click)="canceledit($event, row.id)"
                  title="Cancel"
                  *ngIf="enable == row.id"
                  >cancel</mat-icon
                >
              </td>
            </ng-container>

            <tr
              class="headerbox title"
              mat-header-row
              *matHeaderRowDef="displayedColumns"
            ></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4" style="text-align: center">
                No data found
              </td>
            </tr>
          </table>
          <mat-paginator
            [pageSizeOptions]="!pageLoading ? getPageSizes() : [5, 10, 20]"
          ></mat-paginator>

          <!-- <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator> -->
        </div>
      </div>
    </div>
  </form>
</div>

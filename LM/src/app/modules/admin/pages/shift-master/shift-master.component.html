<div fxLayout="column" style="min-height: 700px;">
    <form [formGroup]="shiftForm" autocomplete="off">
        <mat-card>
            <mat-card-header>
                <mat-card-title> Shift </mat-card-title>
            </mat-card-header>
            <!-- <mat-divider></mat-divider> -->
            <div fxLayout="row wrap" fxLayoutAlign.xs="center center">

                <mat-form-field fxFlex.xs="100" class="mx-2 my-2" appearance="outline">
                    <mat-label>Shift Name</mat-label>
                    <input formControlName="shift" required matInput  maxlength="50"
                        placeholder="Shift Name">
                    <mat-error class="con-error" *ngIf="shiftForm.controls.shift.errors?.required">
                        {{requiredField}}
                    </mat-error>
                </mat-form-field>

                <mat-form-field fxFlex.xs="100%" fxFlex="50%" class="mx-2 my-2" appearance="outline">
                    <mat-label>Shift Description</mat-label>
                    <textarea formControlName="description"  matInput maxlength="250" placeholder="Description"></textarea>
                    
                </mat-form-field>

            </div>
            <div class="column">
                <mat-label class="mx-2"><b>Shift Timings</b></mat-label>
                <div fxLayout="row wrap">
                  
                    <mat-form-field fxFlex.xs="100" class="mx-2 my-2" appearance="outline">
                        <mat-label>Start Time</mat-label>
                        <input formControlName="startTime" matTimepicker />
                        <mat-error class="con-error" *ngIf="shiftForm.controls.startTime.errors?.required">
                            {{requiredField}}
                        </mat-error>
                      </mat-form-field>
                    <mat-form-field fxFlex.xs="100%" class="mx-2 my-2" appearance="outline">
                        <mat-label>End Time</mat-label>
                        <input formControlName="endTime" matTimepicker (change)="changeEndTime($event)" />
                        <mat-error class="con-error" *ngIf="shiftForm.controls.endTime.errors?.required">
                            {{requiredField}}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field fxFlex.xs="100%" class="mx-2 my-2" appearance="outline">
                        <mat-label>Total Hours</mat-label>
                        <input formControlName="totalHours" required matInput placeholder="HH:MM">
                        <mat-error class="con-error" *ngIf="shiftForm.controls.totalHours.errors?.required">
                            {{requiredField}}
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="column">
                <mat-label class="mx-2"><b> Grace Period</b></mat-label>
                <div fxLayout="row wrap">

                    <mat-form-field fxFlex.xs="100" class="mx-2 my-2" appearance="outline">
                        <mat-label>In Time</mat-label>
                        <input formControlName="graceInTime" matTimepicker />
                        <mat-error class="con-error" *ngIf="shiftForm.controls.graceInTime.errors?.required">
                            {{requiredField}}
                        </mat-error>
                    </mat-form-field>
    
                    <mat-form-field fxFlex.xs="100%" class="mx-2 my-2" appearance="outline">
                        <mat-label>Out Time</mat-label>
                        <input formControlName="graceOutTime" matTimepicker />
                        <mat-error class="con-error" *ngIf="shiftForm.controls.graceOutTime.errors?.required">
                            {{requiredField}}
                        </mat-error>
                    </mat-form-field>
    
                </div>
            </div>


            <div class="row wrap">
                <mat-label class="mx-4 my-2">When number of lates is more than </mat-label>
                <mat-form-field fxFlex="50px" class="select" fxFlex.xs="100" >
                    <!-- <mat-label>No Of times</mat-label> -->
                    <input type="text" onlyNumber formControlName="noofTimes" matInput placeholder=""  minlength="1" maxlength="2">

                </mat-form-field>
                <mat-label class="mx-2 my-2">per month</mat-label>
            </div>
            <div class="row wrap">
                <mat-label class="mx-4 my-2">Deduct</mat-label>
                <mat-form-field fxFlex="70px" class="select" fxFlex.xs="100">
                    <!-- <mat-label>No Of days</mat-label> -->
                    <mat-select  required formControlName="noofDays">
                        <ng-container *ngFor="let b of daysList">
                                <mat-option value={{b}}>{{b}}</mat-option>
                        </ng-container>
                    </mat-select>
                    <mat-error class="con-error" *ngIf="shiftForm.controls.noofDays.errors?.required">
                        {{requiredOption}}
                    </mat-error>
                </mat-form-field>
                <mat-label class="mx-2 my-2">days from the leave balance leaves.</mat-label>
            </div>
            <br>
            <div>
                <mat-label class="mx-2"><b>Overtime Duration</b></mat-label>
                <div class="row wrap">
                    <mat-label class="mx-4 my-4">Allow minimum number of work hours per day</mat-label>
                    <mat-form-field fxFlex.xs="100%" class="mx-2 my-2" appearance="outline">
                        <mat-label>Over Time</mat-label>
                        <mat-select  required formControlName="overTime">
                            <ng-container *ngFor="let b of overTimeList">
                                    <mat-option value={{b.id}}>{{b.name}}</mat-option>
                            </ng-container>
                        </mat-select>

                        <mat-error class="con-error" *ngIf="shiftForm.controls.overTime.errors?.required">
                            {{requiredField}}
                        </mat-error>
                    </mat-form-field>
    
                   
                </div>
            </div>

            <div fxLayoutAlign="center">
                <button *ngIf="!isEdit" class="mx-2 my-3 mat-stroked-button button-save" style="height: 45px;"
                    (click)="saveShiftData()" type="submit">
                    <span>Submit</span>
                </button>

                <button class="mx-2 my-3 mat-stroked-button button-clear" style="height: 45px;" (click)="resetform()">
                    <span>Cancel</span>
                </button>
                <br />
            </div>
        </mat-card>
    </form>
    <mat-divider></mat-divider>
    <mat-card fxLayout="column">
        <div fxLayout="row" fxLayout.xs="column" fxFlex.xs="100%" fxLayoutAlign="end">
            <mat-form-field fxFlex.xs="100%" appearance="outline">
                <mat-label>Filter</mat-label>
                <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input>
                <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>
        </div>
        <div class="mat-elevation-z8">
            <table mat-table [dataSource]="dataSource" matSort>

                <ng-container matColumnDef="id" style="width: 10%">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> S.No. </th>
                    <td mat-cell *matCellDef="let row;let i = index;">{{i+1}} </td>
                </ng-container>


                <ng-container matColumnDef="shiftname">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Shift Name </th>
                    <td mat-cell *matCellDef="let row"> {{row.shiftname}}</td>
                </ng-container>


                <ng-container matColumnDef="starttime">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Start Time</th>
                    <td mat-cell *matCellDef="let row"> {{row.fromtime}} </td>
                </ng-container>


                <ng-container matColumnDef="endtime">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> End Time </th>
                    <td mat-cell *matCellDef="let row"> {{row.totime}} </td>
                </ng-container>
                <ng-container matColumnDef="workinghours">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Working Hours </th>
                    <td mat-cell *matCellDef="let row"> {{row.totalhours}} </td>
                </ng-container>
                 
                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef  style="padding-left: 60px"> Status </th>
                          <td mat-cell *matCellDef="let row">
                            <mat-radio-group  >
                                <mat-radio-button class="mr-2" color="primary" *ngFor="let halfs of arrayValue;index as i;" (change)="status(halfs.Value,row.shiftid)" [checked]="halfs.Value == row.status"  [value]="halfs.Value"  >{{halfs.name}}</mat-radio-button>
                              </mat-radio-group>
                        </td>
                </ng-container>
                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Action </th>
                   
                    <td mat-cell *matCellDef="let row">                         
                        <mat-icon (click)="view(row)"  title="View" >visibility</mat-icon> 
                    </td>
                </ng-container>
                <tr class="headerbox title" mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>


                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="6">No data available</td>
                </tr>
            </table>
            <mat-paginator [pageSizeOptions]="!pageLoading ? getPageSizes() : [5, 10, 20]"></mat-paginator>

            <!-- <mat-paginator [pageSizeOptions]="pageSize"></mat-paginator> -->
        </div>
    </mat-card>




</div>